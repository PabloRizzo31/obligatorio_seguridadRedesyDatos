_format_version: "3.0"
_transform: true

services:
  - name: login-mock-service
    # Destino dummy, nunca se usa porque el plugin corta la respuesta
    url: http://example.com/
    routes:
      - name: login-route
        hosts:
          - api.example.com
        paths:
          - /login
        methods:
          - POST
        strip_path: false
    plugins:
      - name: request-termination
        config:
          status_code: 200
          content_type: application/json
          body: |
            {
              "status": "ok",
              "message": "Login simulado exitoso",
              "token": "TOKEN_DE_EJEMPLO_12345"
            }
      - name: key-auth
      - name: rate-limiting
        config:
          minute: 10
          policy: local

consumers:
  - username: demo-client
    keyauth_credentials:
      - key: "<api-key>"

plugins:
  - name: response-transformer
    config:
      add:
        headers:
          - "X-Frame-Options: DENY"
          - "X-Content-Type-Options: nosniff"



